<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>농식품 무역 영어 학습</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2c3e50">
    
    <!-- ResponsiveVoice TTS -->
    <script src="https://code.responsivevoice.org/responsivevoice.js?key=jQZ2zpVs"></script>
</head>
<body>
    <div class="container">
        <!-- 헤더 -->
        <header>
            <h1>🌾 AgriVocab</h1>
            <p class="subtitle">농식품 무역 비즈니스 영어</p>
        </header>

        <!-- 설정 패널 -->
        <div id="settingsPanel" class="settings-panel hidden">
            <h3>⚙️ 설정</h3>
            <div class="settings-content">
                <label for="sheetsUrl">Google Sheets URL:</label>
                <input type="text" id="sheetsUrl" placeholder="https://docs.google.com/spreadsheets/d/YOUR_SHEET_ID">
                <button onclick="app.saveSettings()">저장</button>
                <button onclick="app.toggleSettings()">닫기</button>
            </div>
        </div>

        <!-- 메인 화면 -->
        <main id="mainScreen">
            <!-- 통계 대시보드 -->
            <div class="stats-dashboard">
                <div class="stat-card">
                    <div class="stat-value" id="totalWords">0</div>
                    <div class="stat-label">전체 단어</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="learnedWords">0</div>
                    <div class="stat-label">학습 완료</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="todayWords">0</div>
                    <div class="stat-label">오늘 학습</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="accuracy">0%</div>
                    <div class="stat-label">정답률</div>
                </div>
            </div>

            <!-- 액션 버튼 -->
            <div class="action-buttons">
                <button class="btn-primary" onclick="app.startReview()">
                    📝 복습 테스트
                </button>
                <button class="btn-primary" onclick="app.startLearning()">
                    📚 신규 단어 학습
                </button>
                <button class="btn-secondary" onclick="app.toggleSettings()">
                    ⚙️ 설정
                </button>
            </div>

            <!-- 최근 학습 기록 -->
            <div class="recent-history">
                <h3>📊 최근 학습 기록</h3>
                <div id="historyList"></div>
            </div>
        </main>

        <!-- 학습 화면 -->
        <div id="learningScreen" class="hidden">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="progress-text" id="progressText">1 / 15</div>

            <div class="word-card">
                <div class="word-category" id="wordCategory">Category</div>
                <div class="word-english" id="wordEnglish">
                    <span id="englishText">negotiate</span>
                    <button class="btn-speaker" onclick="app.speakWord()">🔊</button>
                </div>
                <div class="word-korean" id="wordKorean">협상하다</div>
                
                <div class="examples-container">
                    <h4>📌 예문 (3개)</h4>
                    <div class="example" id="example1">
                        <button class="btn-speaker-small" onclick="app.speakExample(1)">🔊</button>
                        <span></span>
                    </div>
                    <div class="example" id="example2">
                        <button class="btn-speaker-small" onclick="app.speakExample(2)">🔊</button>
                        <span></span>
                    </div>
                    <div class="example" id="example3">
                        <button class="btn-speaker-small" onclick="app.speakExample(3)">🔊</button>
                        <span></span>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn-nav" onclick="app.previousWord()">◀ 이전</button>
                    <button class="btn-nav btn-next" onclick="app.nextWord()">다음 ▶</button>
                </div>

                <button class="btn-finish" onclick="app.finishLearning()">학습 완료</button>
            </div>
        </div>

        <!-- 테스트 화면 -->
        <div id="testScreen" class="hidden">
            <div class="progress-bar">
                <div class="progress-fill" id="testProgressBar"></div>
            </div>
            <div class="progress-text" id="testProgressText">1 / 10</div>

            <div class="test-card">
                <div class="test-instruction">다음 단어를 영어로 입력하세요</div>
                <div class="test-korean" id="testKorean">협상하다</div>
                
                <div class="test-input-container">
                    <input type="text" id="testInput" placeholder="영어 스펠링 입력" autocomplete="off">
                    <button class="btn-submit" onclick="app.submitAnswer()">제출</button>
                </div>

                <div class="test-feedback hidden" id="testFeedback">
                    <div class="feedback-result" id="feedbackResult"></div>
                    <div class="feedback-answer" id="feedbackAnswer"></div>
                    <button class="btn-next-test" onclick="app.nextTest()">다음 문제</button>
                </div>
            </div>

            <div class="test-summary hidden" id="testSummary">
                <h2>테스트 결과</h2>
                <div class="summary-stats">
                    <div class="summary-item">
                        <span>정답</span>
                        <span id="correctCount">0</span>
                    </div>
                    <div class="summary-item">
                        <span>오답</span>
                        <span id="wrongCount">0</span>
                    </div>
                    <div class="summary-item">
                        <span>정답률</span>
                        <span id="accuracyRate">0%</span>
                    </div>
                </div>
                <button class="btn-primary" onclick="app.returnToMain()">메인으로</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // 앱 초기화
        window.addEventListener('DOMContentLoaded', () => {
            app.init();
        });

        // PWA 설치 프롬프트
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            console.log('PWA 설치 가능');
        });
    </script>
</body>
</html>
